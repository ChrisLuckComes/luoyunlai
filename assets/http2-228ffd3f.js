import{j as s,d as t,e}from"./index-ad5eedbe.js";import{N as l}from"./index-44434083.js";import{U as i}from"./useMarkdown-b33dbcc0.js";import{A as r}from"./Anchor-c966fdc9.js";import"./index-47679770.js";const h="/luoyunlai/assets/http-listen-4695cabe.png",n="/luoyunlai/assets/http-change-fba9f3c5.png",a="/luoyunlai/assets/http-fish-026031bb.png",c="/luoyunlai/assets/https-3dedc518.png",x="/luoyunlai/assets/https-instruction-1d8040e8.png",d="/luoyunlai/assets/http2-frame-1493733c.png",j="/luoyunlai/assets/http2-stream-0dd49fc4.jpg";function g(){return s.jsxs("article",{id:"rootArticle",className:t.article,children:[s.jsxs("main",{className:t.content,children:[s.jsx("h1",{id:"http",className:"font-semibold text-h2 mb-2",children:"http=>https=>http2"}),s.jsxs("div",{children:[s.jsx("h2",{id:"httpDisAdv",className:t.articleTitle,children:"http的不足"}),s.jsxs("ul",{className:t.ul,children:[s.jsxs("li",{children:["1. ",s.jsx("strong",{className:"text-16",children:"明文"}),"传输,安全性低"]}),s.jsxs("li",{children:["2. 队头",s.jsx("strong",{className:"text-16",children:"阻塞"}),"，如果前面的请求未完成，后续的请求会被阻塞"]})]}),s.jsx("br",{}),"当然http还有其他的不足，例如首部信息冗余等。列举以上两点是为了引出下文的https,http2。",s.jsx("h2",{id:"https",className:t.articleTitle,children:"https"}),"明文传输安全性低主要体现在哪呢？主要是如下三点：",s.jsxs("ul",{className:t.ul,children:[s.jsxs("li",{id:"listen",children:["被",s.jsx("strong",{children:"窃听"}),s.jsx("br",{}),s.jsx(e,{src:h,alt:"listen"})]}),s.jsxs("li",{id:"change",children:["被",s.jsx("strong",{children:"篡改"}),s.jsx("br",{}),s.jsx(e,{src:n,alt:"change"})]}),s.jsxs("li",{id:"fish",children:[s.jsx("strong",{children:"冒充"}),s.jsx("br",{}),s.jsx(e,{src:a,alt:"fish"})]})]}),"https就是为了解决这些安全风险而在的。HTTPS = HTTP + SSL/TLS，通过 SSL证书来验证服务器的身份，并为浏览器和服务器之间的通信进行加密",s.jsx("br",{}),s.jsx("br",{}),s.jsx(e,{src:c,alt:"https"}),s.jsx("br",{}),s.jsx(e,{src:x,alt:"https_instruction"}),s.jsx("strong",{id:"legal",className:"text-16",children:"怎么验证证书合法性？"}),s.jsxs("ul",{className:t.ul,children:[s.jsxs("li",{children:["1. 客户端使用公钥解密签名",s.jsx("strong",{children:"（服务器对证书正文使用摘要算法生成摘要，并用私钥进行加密生成签名）"}),"，如果证书未被篡改才能解密成功得到摘要A，并使用同样的摘要算法对证书明文进行计算得到B，A跟B一致则验证成功。"]}),s.jsx("li",{children:"2. 比较证书中的域名和请求的域名是否一致"})]}),s.jsx("strong",{id:"disAdv",className:"text-16",children:"HTTPS缺点"}),s.jsxs("ul",{className:t.ul,children:[s.jsx("li",{children:"1. 需要进行加解密算法，性能开销大"}),s.jsx("li",{children:"2. 一般需要收费 💸，越贵功能越强大"})]}),s.jsx("h2",{id:"http2",className:t.articleTitle,children:"http2"}),s.jsx("p",{children:"http2是http1.x的升级版，协议依然是http，加密依然是https"}),s.jsx("br",{}),s.jsx("strong",{id:"frame",className:"text-16",children:"帧结构"}),s.jsx("p",{children:"HTTP2相比于HTTP1.1（文本）使用了二进制进行数据传输，提高了HTTP的传输效率，同时也方便了使用位运算对HTTP数据进行解析。"}),s.jsx("br",{}),s.jsx(e,{src:d,alt:"frame"}),s.jsx("br",{}),s.jsx("strong",{id:"stream",className:"text-16",children:"并发传输"}),s.jsx("br",{}),s.jsx("p",{children:"并发传输解决了应用层队头阻塞的问题，通过多个Stream（由帧组成）复用一条TCP连接来实现，每个Stream都有ID，也避免了握手建立连接、冷启动的耗时"}),s.jsx("br",{}),s.jsx(e,{src:j,alt:"stream"}),s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{id:"other",className:"text-16",children:"其他优点"}),s.jsx("p",{children:"头部压缩,服务器推送等"}),s.jsx("h2",{id:"nginx",className:t.articleTitle,children:"nginx配置"}),"开启http2非常简单，在listen 443 ssl后面追加http2就行，需要有",s.jsx("code",{children:"http_v2_module"})," 模块，否则需要重新安装更高版本的nginx",s.jsx(i,{markdown:l})]})]}),s.jsx(r,{items:[{title:"http",key:"http",href:"#http"},{title:"http不足",key:"httpDisAdv",href:"#httpDisAdv"},{title:"https",key:"https",href:"#https",children:[{title:"被窃听",key:"listen",href:"#listen"},{title:"被篡改",key:"change",href:"#change"},{title:"冒充",key:"fish",href:"#fish"},{title:"验证证书合法性",key:"legal",href:"#legal"},{title:"缺点",key:"disAdv",href:"#disAdv"}]},{title:"http2",key:"http2",href:"#http2",children:[{title:"帧结构",key:"frame",href:"#frame"},{title:"并发传输",key:"stream",href:"#stream"},{title:"其他优点",key:"other",href:"#other"}]},{title:"nginx配置",key:"nginx",href:"#nginx"}]})]})}export{g as default};
