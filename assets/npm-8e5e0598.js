import{j as s,d as r}from"./index-3c280953.js";import{U as e}from"./useMarkdown-9302617b.js";import{G as t,a as d,N as x,b as p,R as h,c as m,d as g}from"./index-e697aac2.js";function f(){const l=s.jsx(e,{markdown:t}),n=s.jsx(e,{markdown:d}),i=s.jsx(e,{markdown:x}),a=s.jsx(e,{markdown:p}),c=s.jsx(e,{markdown:h}),j=s.jsx(e,{markdown:m}),o=s.jsx(e,{markdown:g});return s.jsx("article",{className:r.article,children:s.jsxs("main",{className:r.content,children:[s.jsx("h1",{className:r.pageTitle,children:"从0到1发布一个npm包"}),s.jsx("br",{}),"以本人的npm包",s.jsx("a",{target:"_blank",rel:"noreferrer",className:r.href,href:"https://www.npmjs.com/package/dayjs-date-tools",children:"dayjs-date-tools"}),"为例，下文中cypress为测试框架，无需测试可忽略相关内容"," ",s.jsx("span",{className:"text-assist",children:"建议还是先自测再发上去"}),s.jsx("br",{}),s.jsx("h2",{className:r.articleTitle,children:"准备工作"}),s.jsx("div",{children:s.jsxs("ul",{className:r.ul,children:[s.jsxs("li",{children:["分别注册",s.jsx("a",{target:"_blank",rel:"noreferrer",className:r.href,href:"https://www.npmjs.com/",children:"npm"}),"、",s.jsx("a",{target:"_blank",rel:"noreferrer",className:r.href,href:"https://github.com/",children:"github"}),"账号,已有跳过"]}),s.jsx("li",{children:s.jsx("a",{target:"_blank",rel:"noreferrer",className:r.href,href:"https://github.com/new",children:"github新增repository"})}),s.jsxs("li",{children:[s.jsx("code",{children:"git clone"})," 代码拉到本地"]})]})}),s.jsx("h2",{className:r.articleTitle,children:"工程"}),s.jsxs("ul",{className:r.ul,children:[s.jsx("li",{children:s.jsx("span",{children:"npm init 根据实际情况填写字段，完成后会生成一个初始化package.json"})}),s.jsxs("li",{children:["安装必须的依赖rollup：",s.jsx("span",{className:r.assist,children:"如果是纯js/ts可以不用rollup，实际上工程多多少少都有依赖，建议使用"}),s.jsx("br",{}),s.jsx("code",{children:"pnpm add rollup @rollup/plugin-commonjs @rollup/plugin-node-resolve @rollup/plugin-typescript -D"}),s.jsx("br",{}),s.jsx("br",{}),"新增",s.jsx("strong",{children:"rollup.config.js:"}),c,s.jsx("br",{}),"package.json添加scripts:",s.jsx("br",{}),j]}),s.jsxs("li",{children:["安装typescript:",s.jsx("br",{}),s.jsx("code",{children:"pnpm add typescript -D"}),s.jsx("br",{})," ",s.jsx("br",{}),"新增",s.jsx("strong",{children:"tsconfig.json"}),o]}),s.jsxs("li",{children:["修改package.json;",a]})]}),s.jsx("h2",{className:r.articleTitle,children:"编码"}),s.jsxs("p",{children:["然后就可以新增src目录开始编码啦，最后只需要在index.ts中export所有成员就OK，/src/index.ts如下：",n]}),s.jsx("h2",{className:r.articleTitle,children:"发布"}),s.jsxs("ul",{className:r.ul,children:[s.jsxs("li",{children:["新增.gitignore,.npmignore,我的配置如下",s.jsx("br",{}),s.jsx("br",{}),s.jsx("code",{children:".gitingore"}),l,s.jsx("code",{children:".npmignore"}),i]}),s.jsx("li",{children:"add commit push git三连提交代码"}),s.jsxs("li",{children:[s.jsx("span",{children:"准备发布，一般初始版本号后缀为alpha，如果已存在该版本号需要修改package.json中的version"}),s.jsx("br",{}),s.jsx("br",{}),"输入",s.jsx("code",{children:"pnpm login"}),"接下来输入npmjs.com的账号密码",s.jsx("br",{}),s.jsx("br",{}),"完成后rollup打包生成dist目录用于发布",s.jsx("code",{children:"pnpm build"}),s.jsx("br",{}),s.jsx("br",{}),"最后",s.jsx("code",{children:"pnpm publish"})]})]}),s.jsx("h2",{className:r.articleTitle,children:"大功告成"}),"发布完成，可以在想要的地方使用自己的npm包啦"]})})}export{f as default};
